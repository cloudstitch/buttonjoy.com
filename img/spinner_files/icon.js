function import$(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var x$;x$=angular.module("loadingIO"),x$.directive("delayBk",function(){return{restrict:"A",link:function(e,t,n){var r;return r=n.delayBk,$("<img/>").attr("src",r).load(function(){return $(this).remove(),t.css({"background-image":"url("+r+")"}),t.toggleClass("visible")})}}}),x$.factory("svg2canvas",function(){return function(e,t){var n;return n=document.createElement("canvas"),e=e.trim(),canvg(n,e,{renderCallback:function(){return t(n)}})}}),x$.factory("outputmodal",function(){return{node:null,url:null,blob:null,type:null,mode:null,create:function(e,t,n,r){return this.node=e,this.blob=t,this.type=n,this.mode=r,this.url=URL.createObjectURL(t),$("#output-box").html(""),$("#output-box").append($(this.node)),$("#output-box-link").attr("href",this.url),$("#output-box-link").attr("download",this.type+"."+r.toLowerCase()),$("#output-modal").modal("show")}}}),x$.controller("output",["$scope","outputmodal"].concat(function(e,t){return e.outputmodal=t,e.$watch("outputmodal.mode",function(){return e.mode=t.mode})})),x$.service("ldCapture",["$rootScope","$timeout","svg2canvas","outputmodal"].concat(function(e,t,n){return function(e,r,o,a,i){var s;return o=o?o.replace("#","0x"):"0xFFFFFF",s=import$({},{delta:r,step:0,target:null,gif:new GIF({workers:2,quality:10,transparent:o})||16777215,addframe:function(n){var r,o=this;return console.log(this.step),a((r=parseInt(this.step/10))<100?r:100),this.gif.addFrame(n,{delay:40}),this.step>=1e3?(this.gif.on("finished",function(t){var n;return n=new window.FileReader,n.readAsDataURL(t),n.onloadend=function(){var r;return r=document.createElement("img"),r.src=n.result,i($(r),t,e.type)}}),this.gif.render()):t(function(){return o.runner()},10)},runner:function(){var e=this;return this.step+=this.delta,this.target.step(this.step),"css"===this.target.mode?t(function(){return html2canvas(e.target.node,{onrendered:function(t){return e.addframe(t)}})},100):t(function(){var t,r,o,a,i;return t=e.target.node,r=[t.width(),t.height()],o=r[0],a=r[1],i=e.target.node.html().replace(/width="100%" height="100%"/,"width='"+o+"' height='"+a+"'"),n(i,function(t){return e.addframe(t)})},100)},start:function(e){var n=this;return this.step=0,this.target=e,t(function(){return n.runner()},100),this}}),s.start(e)}})),x$.controller("ldIcon",["$scope","$injector","$timeout","$interval","$http","$compile","ldIconType","ldCapture","outputmodal","svg2canvas","ldNotify"].concat(function(e,t,n,r,o,a,i,s,l,c,u){function d(e){return{hex:e}}var f,p,h,m,g,v,b,y,k,w,x;for(e.delay=0,e.delta=50,e.$watch("build",function(){var t,n,r,o,a,i,s;for(t=(new Date).getTime(),n=e.build.snapshot(),e.build.varsState!==n&&t-e.build.updateTime>1e3&&(ga("send","event","edit","config",e.build.type),e.build.varsState=n,e.build.updateTime=t),r={},o=0,i=(a=e.build.vars.concat(["type"])).length;i>o;++o)s=a[o],r[s]=e.build[s];return r=btoa(JSON.stringify(r)),e.build.key?(a=e.build,a.shareLink="http://loading.io/loader/?key="+e.build.key,a.payload=r,a):r?(a=e.build,a.shareLink="http://loading.io/loader/?use="+r,a.payload=r,a):void 0},!0),e.$watch("build.speed",function(t){return t>0&&(e.delta=50/t),e.delta<10?(e.delta=10,e.build.speed=5):void 0}),e.$watch("demoLoader",function(){return e.demoLoader?n(function(){var t,n,r,o,a;for(t=0,r=(n=e.demoLoader.vars).length;r>t;++t)o=t,a=n[t],e.build.useconfig&&e.build["c"+(o+1)]||(e.build["c"+(o+1)]=a["default"]);return e.build.useconfig||e.demoLoader.speed&&(e.build.speed=e.demoLoader.speed),e.demoLoader.editableVars=e.demoLoader.vars.filter(function(e){var t;return"px"===(t=e.type)||"color"===t||"choice"===t}),e.build.useconfig=!1,e.build.start(),e.build.show=!0},0):void 0}),e.build={choices:i.list,anitimer:null,size:60,running:!0,making:!1,done:!1,show:!1,speed:1,cbk:"#ffffff",vars:[],shareLink:"http://loading.io/loader/",runner:function(){return!e.build.making&&(e.demoLoader.step(e.delay),e.build.running)?e.delay=(e.delay+e.delta)%1e3:void 0},start:function(){var e=this;return this.anitimer||(this.anitimer=r(function(){return e.runner()},50)),this.running=!0},stop:function(){return this.anitimer&&(r.cancel(this.anitimer),this.anitimer=null),this.running=!1},type:"default",snapshot:function(e){return function(){var t,n,r,o=[];for(t=0,r=(n=this.vars).length;r>t;++t)e=n[t],o.push(this[e]);return o}.call(this).join("/")},settype:function(r,o){var i=this;return null==o&&(o=null),n(function(){var n,s,l,c,u,d,f,p,h,m,g,v;i.type===r||o||(e.build.key=null),ga("send","event","edit","settype",r),i.stop(),i.show=!1,i.type=r;try{n=t.get("ldIconType-"+r)}catch(b){return s=b,console.log("module not found: "+s.toString())}for(i.vars=["size","speed","cbk"].concat(function(){var e,t,r=[];for(e=1,t=n.vars.length;t>=e;++e)l=e,r.push("c"+l);return r}()),i.varsState=i.snapshot(),i.updateTime=(new Date).getTime(),u=[],d=0,p=(f=n.vars).length;p>d;++d)l=d,h=f[d],u.push(h.attr+"='{{build.c"+(l+1)+"}}'");if(c=u,m=["type='"+r+"'","background='{{build.cbk}}'","js","ng-model='demoLoader'"],g=['style="',"width:{{build.size * 2}}px","height:{{build.size * 2}}px","margin:{{100 - build.size}}px",'"'].join(";"),v=$("<ld-icon-previewer class='ldIconPreviewer' "+c.concat(m,[g]).join(" ")+">"),o)for(import$(e.build,o).useconfig=!0,d=0,p=(f=e.build.vars).length;p>d;++d)l=d,h=f[d],o["c"+(l+1)]||(e.build["c"+(l+1)]=null);return $("#demo-panel").html(""),$("#demo-panel").append(a(v)(e))},0)},_resized:{},resize:function(e){var t,n,r;return this._resized[this.type]||(ga("send","event","edit","resize",this.type),this._resized[this.type]=!0),t=200,n=e.offsetX||e.pageX-$(e.target).offset().left,n=10+190*(n-32)/168,this.size=parseInt(100*((r=n>10?n:10)<200?r:200)/(null!=t?t:200))},reset:function(){return window.location.search=""},savedHint:function(){return setTimeout(function(){var e,t,n;return e=$("#nav-profile").offset(),t=e.top,n=e.left,$("#icon-saved-hint").css({left:n,display:"block",opacity:1}),setTimeout(function(){return $("#icon-saved-hint").fadeOut()},5e3)},1e3)},save:function(){var t,n,r,a,i,s=this;return ga("send","event","icon-editor","save-icon",this.type),e.user.data?(t=e.demoLoader.node,n=[120,120],r=n[0],a=n[1],i=t.html().replace(/width="100%" height="100%"/,"width='"+r+"' height='"+a+"'"),c(i,function(t){var n,r,a;return n=t.toDataURL(),r=e.demoLoader.type,a=function(t){var r,a,i;return r=e.demoLoader.patchSvg('<?xml version="1.0" encoding="utf-8"?>'+t,e.build),a="data:image/svg+xml;base64,"+btoa(r),i={payload:s.payload,thumbnail:a,pngthumb:n},e.build.key&&(i.key=e.build.key),o({url:"/d/loader/",method:"POST",data:i}).success(function(t){return u.send("success","Icon saved. Check profile for saved list."),e.build.key=t.key,e.build.savedHint()}).error(function(e){return u.send("warning","Save failed: "+e.msg)})},o.get("/icons/"+r+"/svg.html").success(function(e){return a(e)}).error(function(){return a("<svg><text>N/A</text></svg>")})})):(e.nexturl="/loader/?user="+this.payload,e.auth.show=!0)},getlink:function(){return ga("send","event","click","icon-getlink",this.type),setTimeout(function(){return $("#icon-getlink-modal").modal("show")},0)},makesvg:function(){var t;if("gif"!==e.demoLoader.mode)return ga("send","event","build","svg",this.type),t=e.demoLoader.type,o.get("/icons/"+t+"/svg.html").success(function(n){var r;return n='<?xml version="1.0" encoding="utf-8"?>'+n,r=e.demoLoader.patchSvg(n,e.build),l.create($(r),new Blob([r],{type:"text/html"}),t,"SVG")})},makecss:function(){var t;return ga("send","event","build","css",this.type),t=e.demoLoader.type,o.get("/icons/"+t+"/css.html?5").success(function(n){return o.get("/icons/"+t+"/main.css?5").success(function(r){var o;return o="<style type='text/css'> "+r+" </style> "+n,o=e.demoLoader.patchCss(o,e.build),l.create($(o),new Blob([o],{type:"text/html"}),t,"CSS")})})},makegif:function(){var t=this;return ga("send","event","build","gif",this.type),this.done=!1,this.making=!0,this.stop(),s(e.demoLoader,e.delta,this.cbk,function(t){return e.$apply(function(){return e.build.percent=t})},function(n,r,o){return l.create(n,r,o,"GIF"),e.$apply(function(){return t.done=!0,t.making=!1,t})})}},$(".ttn").tooltip(),n(function(){return e.build.settype("default")},0),f=['"<a href="http://thenounproject.com/term/dots/21252/">Dots</a>", Istiko Rahadi, BY-CC 3.0','"<a href="http://www.kingthingsfonts.co.uk/fonts/fonts.htm">Kingthings Sans</a>", Kingthings'],$("#attribution").popover({placement:"top",html:"true",title:"Attributions to Resources",content:f.join("<br>")}),$("#eula").popover({placement:"top",html:"true",title:"Term of Use",content:"All materials used in generating animated icons in this website, except the g0v icon, are created by loading.io. You can use them freely for any purpose."}),$("#about").popover({placement:"top",html:"true",title:"About Us",content:"Loading.io is built upon several open source projects, including angularjs, canvg, svg2canvs, and gif.js."}),n(function(){return $("#dimmer").fadeOut()},1e3),ldColorPicker.init(),e.colorpicker={ctrl:$("#ldColorPicker")[0]._ldcp,trigger:null,toggle:function(e){return this.trigger!==e.target?(this.ctrl.target=this.trigger=e.target,this.ctrl.toggle(!0)):this.ctrl.toggle(),e.stopPropagation()},handle:function(){var e;return(e=this.trigger)?$(e).trigger("input"):void 0}},e.colorpicker.ctrl.on("change",function(){return e.colorpicker.handle()}),p={},h=/use=([^#&]+)/.exec(window.location.search),h&&(m=atob(decodeURIComponent(h[1])),"{"!==m[0]?atob(h[1]).split(",").map(function(e){return e.split("=")}).map(function(e){return p[e[0]]=e[1]}):import$(p,JSON.parse(m)),p.type&&n(function(){return e.build.settype(p.type,p)},1e3)),h=/key=([^#&]+)/.exec(window.location.search),h&&(e.build.key=h[1]),e.build.key&&o({url:"/d/loader/"+e.build.key,method:"GET"}).success(function(t){var r;return r=atob(t.payload),"{"!==r[0]?r.split(",").map(function(e){return e.split("=")}).map(function(e){return p[e[0]]=e[1]}):import$(p,JSON.parse(r)),p.type?n(function(){return e.build.settype(p.type,p)},1e3):void 0}).error(function(){return window.location.replace("/404.html")}),e.customPal={key:null,save:function(){var t=this;return e.user.data?(ga("send","event","icon-editor","save-pal"),o({url:this.key?"/d/palette/"+this.key:"/d/palette/",method:this.key?"PUT":"POST",data:{name:"custom from loader",colors:e.palettes.custom[0].colors}}).success(function(e){return u.send("success","custom palette saved."),t.key=e.key}).error(function(e){return u.send("danger","can't save palette, try again later."),console.log(e)})):e.auth.show=!0}},e.palettes={"default":[{name:"Movie / Friday the 13th",key:"557aabfafb1727f10341787f",colors:["#fefefe","#cec9c9","#3c302e","#bb171a"]},{name:"Abstract / Tropical",key:"557aabfafb1727f103417896",colors:["#51cacc","#9df871","#e0ff77","#de9dd6","#ff708e"]},{name:"Abstract / Tender",key:"557aabfafb1727f103417897",colors:["#f29c98","#f5b697","#f5e797","#a2e4f5","#009dd3"]},{name:"Marvel / Captain America",key:"557aabfafb1727f10341788d",colors:["#9b3430","#fefefe","#aeb7c2","#3b5fa4","#171b31"]},{name:"Abstract / Desert",key:"557aabfafb1727f10341789f",colors:["#706d5d","#b4b197","#f4efcc","#e2d07e","#bfa65f"]},{name:"Disney / Frozen",key:"557aabfafb1727f10341784f",colors:["#b5ccf1","#94a9ce","#667395","#292664","#f5f4fa","#f2bed1","#87434d","#552b2f"]},{name:"Brand / Google",key:"557aabfafb1727f103417890",colors:["#c5523f","#f2b736","#499255","#1875e5"]},{name:"Painting / The Scream",key:"557aabfafb1727f10341789d",colors:["#514134","#e35839","#d28d4f","#dbae1d","#477187","#323a3f"]},{name:"DreamWorks / Shrek - alt",key:"557aabfafb1727f10341785f",colors:["#b3c430","#4c5630","#f7faf8","#80aaf3","#984f48","#539a55"]}],mypals:[],custom:[{name:"Custom",key:"0",colors:[{hex:"#999999"}]}],all:[],gen:function(){return this.all=this.mypals.concat(this.custom,this["default"])},selector:[]},g=0,b=(v=e.palettes["default"]).length;b>g;++g)y=v[g],y.colors=y.colors.map(d);return e.palettes.gen(),e.colorpicker.ctrl.on("change",function(){var t,n;return t=e.colorpicker.ctrl.getPalette().colors,e.palettes.selector.length&&"0"!==$("#icon-pal-select").val()||(e.palettes.custom[0].colors=t),e.palettes.selector.length&&"0"===$("#icon-pal-select").val()?(n=e.palettes.all.filter(function(e){return"0"===e.key})[0],n&&(n.colors=t),e.palettes.selector[0].children[0].data=n.colors,$("#icon-pal-select").select2("data",e.palettes.selector,!0)):void 0}),k=function(){var t,n,r,o,a;return t=function(e){return e.map(function(e){return{id:e.key,text:e.name,data:e.colors}})},n=[{text:"Custom",children:t(e.palettes.custom)}],e.palettes.mypals.length&&n.push({text:"My Palette",children:t(e.palettes.mypals)}),n.push({text:"Default",children:t(e.palettes["default"])}),e.palettes.selector=n,e.palettes.gen(),r=!1,o=$("#icon-pal-select"),o.select2(a={allowedMethods:["updateResults"],templateResult:function(e){var t,n;return e.data?(t=function(){var t,r,o,a=[];for(t=0,o=(r=e.data).length;o>t;++t)n=r[t],a.push("<div class='color' "+("style='background:"+n.hex+";width:"+100/e.data.length+"%'")+"></div>");return a}().join(""),$("<div class='palette select'><div class='name'>"+e.text+"</div>"+("<div class='palette-color'>"+t+"</div></div>"))):e.text},data:e.palettes.selector}),o.on("change",function(){function t(e){return e.hex}var n,o,a,i,s,l,c,u=this;if(e.schemaIsCustom="0"===$(this).val(),!r)return r=!0;for(n=0,o=e.palettes.all.filter(function(e){return e.key===$(u).val()})[0],e.build.cbk=o.colors[n].hex,n=(n+1)%o.colors.length,a=0,s=(i=e.demoLoader.vars).length;s>a;++a)l=a,c=i[a],"color"===c.type&&(e.build["c"+(l+1)]=o.colors[n].hex,n=(n+1)%o.colors.length),"palette"===c.type&&(e.build["c"+(l+1)]=o.colors.map(t));return e.colorpicker.ctrl.setPalette({colors:o.colors}),ga("send","event","icon-editor","colorschema",o.name)}),$("#icon-pal-select").val("0").trigger("change")},e.user.data?o({url:"/d/palette/?user="+e.user.data.key,method:"GET"}).success(function(t){return e.palettes.mypals=t.map(function(e){var t;return t={},t.name=e.name,t.key=e.key,t.colors=e.colors,t})})["finally"](function(){return k()}):k(),w="#icon-getlink-modal .btn.copy",x=new Clipboard(w),x.on("success",function(){return $(w).tooltip({title:"copied",trigger:"click"}).tooltip("show"),setTimeout(function(){return $(w).tooltip("hide")},1e3)}),x.on("error",function(){return $(w).tooltip({title:"Press Ctrl+C to Copy",trigger:"click"}).tooltip("show"),setTimeout(function(){return $(w).tooltip("hide")},1e3)})})),x$.factory("ldIconSvg",function(){return'width="100%" height="100%" viewBox="0 0 100 100"'}),x$.factory("ldIconResize",function(){return function(e,t,n){return e=e.replace(/width="100%" height="100%"/,"width='"+2*n.size+"px' height='"+2*n.size+"px'"),e=e.replace(new RegExp('"uil-'+t+'-css"'),"'uil-"+t+"-css' style='transform:scale("+2*n.size/200+");'")}}),x$.directive("ldIconPreviewer",["$injector","$http","$templateCache","$timeout"].concat(function(e,t,n,r){return{restrict:"E",template:"",scope:{p:"=ngModel"},link:function(o,a,i,s){var l,c,u;l=i.type||"default",c="js"in i;try{u=e.get("ldIconType-"+l)}catch(d){return a=d,console.log("module not found: "+a.toString())}return o.url="/icons/"+l+"/"+("css"!==u.type?c?"svg.static":"svg":"css")+".html",c||a.addClass("anim"),t.get(o.url+"?3",{cache:n}).success(function(e){var t,n,d,f,p,h,m,g,v=[];a.html(e),c||r(function(){return u.start(o,a,i,s)},0),o.p={node:a,speed:u.speed||1,nogif:u.nogif,mode:u.mode,vars:u.vars,type:l,start:function(){return u.start(o,a,i,s)},stop:function(){return u.stop(o,a,i,s)},step:function(e){return u.step(o,a,i,s,e)},patchSvg:function(e,t){return u.patchSvg(e,t)},patchCss:function(e,t){return u.patchCss(e,t)}},u.custom&&u.custom(o,a,i,s),t=function(){return a.find("rect.bk").css("fill",i.background)},i.$observe("background",t);for(n in d=i.$$observers){for(f=d[n],p=[],h=0,m=f.length;m>h;++h)g=h,p.push(f[g](i[n]));v.push(p)}return v})}}}));